<mat-card class="cardWithShadow theme-card">
  <mat-card-header>
    <mat-card-title>Analysis reports</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <div class="row">
      <mat-form-field appearance="outline" class="col-lg-3">
        <mat-label>From Month</mat-label>
        <input matInput [(ngModel)]="fromMonth" [matDatepicker]="fromPicker" placeholder="Choose a Month" />
        <mat-datepicker-toggle matIconSuffix [for]="fromPicker"></mat-datepicker-toggle>
        <mat-datepicker #fromPicker startView="year" (yearSelected)="chosenYearHandler($event)"
          (monthSelected)="choseFromMonthHandler($event, fromPicker)" panelClass="month-picker">
        </mat-datepicker>
      </mat-form-field>
      <mat-form-field appearance="outline" class="col-lg-3">
        <mat-label>To Month</mat-label>
        <input matInput [(ngModel)]="toMonth" [matDatepicker]="toPicker" placeholder="Choose a Month" />
        <mat-datepicker-toggle matIconSuffix [for]="toPicker"></mat-datepicker-toggle>
        <mat-datepicker #toPicker startView="year" (yearSelected)="chosenYearHandler($event)"
          (monthSelected)="choseToMonthHandler($event, toPicker)" panelClass="month-picker">
        </mat-datepicker>
      </mat-form-field>

      <mat-form-field appearance="outline" class="col-lg-3" *ngIf="isDisplay && isAdmin">
        <mat-label>Manager</mat-label>
        <mat-select [(ngModel)]="selectedManagerId" placeholder="Select Manager" (selectionChange)="managerChange()">
          <mat-option [value]=null>All</mat-option>
          <mat-option *ngFor="let item of managerLookup" [value]="item.id">
            <span>{{ item.name }}</span>
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="outline" class="col-lg-3">
        <mat-label>Agent</mat-label>
        <mat-select [(ngModel)]="selectedUserId" placeholder="Select Agent" (selectionChange)="agentChange()">
          <mat-option [value]=null>All</mat-option>
          <mat-option *ngFor="let item of userLookup" [value]="item.id">
            <span>{{ item.name }}</span>
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="outline" class="col-lg-3">
        <mat-label>Area</mat-label>
        <mat-select [(ngModel)]="selectedAreaId" placeholder="Select Area" (selectionChange)="areaChange()">
          <mat-option [value]=null>All</mat-option>
          <mat-option *ngFor="let item of areaLookup" [value]="item.id">
            <span>{{ item.oldId }} - {{ item.name }} - {{ item.id }}</span>
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="outline" class="col-lg-3">
        <mat-label>Shop</mat-label>
        <mat-select [(ngModel)]="selectedShopId" placeholder="Select Shop">
          <mat-option [value]=null>All</mat-option>
          <mat-option *ngFor="let item of shopLookup" [value]="item.id">
            <span>{{ item.id }} - {{ item.name }}</span>
          </mat-option>
        </mat-select>
      </mat-form-field>

      <div class="col-sm-12 col-lg-2">
        <mat-checkbox color="primary" [(ngModel)]="isInstantActivation">Instant Act.</mat-checkbox>
      </div>

      <div class="col-sm-12 col-lg-4 space-between-buttons">
        <button mat-flat-button color="primary" (click)="onFilter()">Submit</button>
        <button mat-flat-button color="primary" (click)="onClear()">Clear</button>
        <button mat-flat-button color="primary" (click)="onFilter()">
          <mat-icon>download</mat-icon> Download
        </button>
      </div>
    </div>
    <p *ngIf="activationList.length > 0" class="info-msg" >** Agent accounts are calculated from 26th to 25th **</p>
    <div *ngIf="activationList?.length > 0" class="table-responsive table-scroll example-container">
      <table mat-table [dataSource]="activationList" class="w-100 custom-table">
        <ng-container *ngFor="let column of displayedColumns" [matColumnDef]="column">
          <th mat-header-cell *matHeaderCellDef [class.sticky-column]="stickyColumns.includes(column)">
            {{ column }}
          </th>
          <td mat-cell *matCellDef="let row" [class.sticky-column]="stickyColumns.includes(column)">
            {{ row[column] }}
          </td>

          <td mat-footer-cell *matFooterCellDef="let row" [class.sticky-column]="stickyColumns.includes(column)">
            {{ getTotal(column)}}
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        <tr mat-footer-row *matFooterRowDef="displayedColumns; sticky: true"></tr>
      </table>
    </div>
    <div class="zero-records" *ngIf="activationList?.length == 0">No records found</div>
  </mat-card-content>
</mat-card>